{"ast":null,"code":"var _jsxFileName = \"/Users/arseny0304/Desktop/full_service/frontend/src/components/D3LineChart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function D3LineChart({\n  data,\n  dateKey,\n  valueKey,\n  color = '#ff69b4'\n}) {\n  _s();\n  const svgRef = useRef();\n  useEffect(() => {\n    if (!Array.isArray(data) || data.length === 0) return;\n\n    // Параметры\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 60,\n      left: 60\n    };\n    const pointBand = 50; // ширина на одну точку (ориентировочно)\n    const viewBoxWidth = margin.left + margin.right + data.length * pointBand;\n    const viewBoxHeight = 400;\n    const svg = d3.select(svgRef.current).attr('viewBox', `0 0 ${viewBoxWidth} ${viewBoxHeight}`).attr('preserveAspectRatio', 'xMidYMid meet');\n    svg.selectAll('*').remove();\n\n    // Подготовка данных\n    const parseDate = d3.timeParse('%Y-%m-%d');\n    const series = data.map(d => ({\n      date: parseDate(d[dateKey]),\n      value: d[valueKey]\n    })).filter(d => d.date instanceof Date);\n\n    // Шкалы\n    const x = d3.scaleTime().domain(d3.extent(series, d => d.date)).range([margin.left, viewBoxWidth - margin.right]);\n    const y = d3.scaleLinear().domain([0, d3.max(series, d => d.value)]).nice().range([viewBoxHeight - margin.bottom, margin.top]);\n\n    // Линия\n    const line = d3.line().x(d => x(d.date)).y(d => y(d.value));\n\n    // Path\n    svg.append('path').datum(series).attr('fill', 'none').attr('stroke', color).attr('stroke-width', 2).attr('d', line);\n\n    // Ось X\n    svg.append('g').attr('transform', `translate(0,${viewBoxHeight - margin.bottom})`).call(d3.axisBottom(x).ticks(5).tickFormat(d3.timeFormat('%b %d'))).selectAll('text').style('font-size', '12px').attr('text-anchor', 'middle');\n\n    // Ось Y\n    svg.append('g').attr('transform', `translate(${margin.left},0)`).call(d3.axisLeft(y).ticks(5));\n  }, [data, dateKey, valueKey, color]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      overflowX: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      style: {\n        width: '100%',\n        height: 'auto',\n        display: 'block'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(D3LineChart, \"89Ty783ABEwsfMbSOeu9vscWF34=\");\n_c = D3LineChart;\nvar _c;\n$RefreshReg$(_c, \"D3LineChart\");","map":{"version":3,"names":["React","useRef","useEffect","d3","jsxDEV","_jsxDEV","D3LineChart","data","dateKey","valueKey","color","_s","svgRef","Array","isArray","length","margin","top","right","bottom","left","pointBand","viewBoxWidth","viewBoxHeight","svg","select","current","attr","selectAll","remove","parseDate","timeParse","series","map","d","date","value","filter","Date","x","scaleTime","domain","extent","range","y","scaleLinear","max","nice","line","append","datum","call","axisBottom","ticks","tickFormat","timeFormat","style","axisLeft","width","overflowX","children","ref","height","display","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/arseny0304/Desktop/full_service/frontend/src/components/D3LineChart.jsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nexport default function D3LineChart({\n  data,\n  dateKey,\n  valueKey,\n  color = '#ff69b4'\n}) {\n  const svgRef = useRef();\n\n  useEffect(() => {\n    if (!Array.isArray(data) || data.length === 0) return;\n\n    // Параметры\n    const margin = { top: 20, right: 20, bottom: 60, left: 60 };\n    const pointBand = 50; // ширина на одну точку (ориентировочно)\n    const viewBoxWidth = margin.left + margin.right + data.length * pointBand;\n    const viewBoxHeight = 400;\n\n    const svg = d3\n      .select(svgRef.current)\n      .attr('viewBox', `0 0 ${viewBoxWidth} ${viewBoxHeight}`)\n      .attr('preserveAspectRatio', 'xMidYMid meet');\n    svg.selectAll('*').remove();\n\n    // Подготовка данных\n    const parseDate = d3.timeParse('%Y-%m-%d');\n    const series = data\n      .map(d => ({ date: parseDate(d[dateKey]), value: d[valueKey] }))\n      .filter(d => d.date instanceof Date);\n\n    // Шкалы\n    const x = d3\n      .scaleTime()\n      .domain(d3.extent(series, d => d.date))\n      .range([margin.left, viewBoxWidth - margin.right]);\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, d3.max(series, d => d.value)])\n      .nice()\n      .range([viewBoxHeight - margin.bottom, margin.top]);\n\n    // Линия\n    const line = d3\n      .line()\n      .x(d => x(d.date))\n      .y(d => y(d.value));\n\n    // Path\n    svg\n      .append('path')\n      .datum(series)\n      .attr('fill', 'none')\n      .attr('stroke', color)\n      .attr('stroke-width', 2)\n      .attr('d', line);\n\n    // Ось X\n    svg\n      .append('g')\n      .attr('transform', `translate(0,${viewBoxHeight - margin.bottom})`)\n      .call(d3.axisBottom(x).ticks(5).tickFormat(d3.timeFormat('%b %d')))\n      .selectAll('text')\n        .style('font-size', '12px')\n        .attr('text-anchor', 'middle');\n\n    // Ось Y\n    svg\n      .append('g')\n      .attr('transform', `translate(${margin.left},0)`)\n      .call(d3.axisLeft(y).ticks(5));\n\n  }, [data, dateKey, valueKey, color]);\n\n  return (\n    <div style={{ width: '100%', overflowX: 'auto' }}>\n      <svg\n        ref={svgRef}\n        style={{ width: '100%', height: 'auto', display: 'block' }}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}