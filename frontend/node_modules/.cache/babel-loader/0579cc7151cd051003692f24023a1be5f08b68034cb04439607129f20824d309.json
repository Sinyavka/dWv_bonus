{"ast":null,"code":"var _jsxFileName = \"/Users/arseny0304/Desktop/full_service/frontend/src/components/D3BarChart.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/components/D3BarChart.jsx\n\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function D3BarChart({\n  data,\n  labelKey,\n  valueKey,\n  color = '#ff69b4'\n}) {\n  _s();\n  const svgRef = useRef();\n  useEffect(() => {\n    if (!Array.isArray(data) || data.length === 0) return;\n\n    // паддинги и размеры\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 80,\n      left: 60\n    };\n    const barBand = 40; // ширина “ячейки” на один бар\n    const viewBoxWidth = margin.left + margin.right + data.length * barBand;\n    const viewBoxHeight = 400;\n\n    // готовим SVG\n    const svg = d3.select(svgRef.current).attr('viewBox', `0 0 ${viewBoxWidth} ${viewBoxHeight}`).attr('preserveAspectRatio', 'xMidYMid meet');\n    svg.selectAll('*').remove();\n\n    // шкалы\n    const x = d3.scaleBand().domain(data.map(d => d[labelKey])).range([margin.left, viewBoxWidth - margin.right]).padding(0.1);\n    const y = d3.scaleLinear().domain([0, d3.max(data, d => d[valueKey])]).nice().range([viewBoxHeight - margin.bottom, margin.top]);\n\n    // рисуем бары\n    svg.append('g').selectAll('rect').data(data).join('rect').attr('x', d => x(d[labelKey])).attr('y', d => y(d[valueKey])).attr('width', x.bandwidth()).attr('height', d => y(0) - y(d[valueKey])).attr('fill', color);\n\n    // ось Y\n    svg.append('g').attr('transform', `translate(${margin.left},0)`).call(d3.axisLeft(y).ticks(5));\n\n    // ось X — просто номера\n    svg.append('g').attr('transform', `translate(0,${viewBoxHeight - margin.bottom})`).call(d3.axisBottom(x).tickFormat((_, i) => i + 1).tickSize(0)).selectAll('text').style('font-size', '12px');\n  }, [data, labelKey, valueKey, color]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      overflowX: 'auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      style: {\n        width: '100%',\n        height: 'auto',\n        display: 'block'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8,\n        fontSize: 14\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\u041B\\u0435\\u0433\\u0435\\u043D\\u0434\\u0430:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        style: {\n          margin: '4px 0 0 16px',\n          padding: 0\n        },\n        children: data.map((d, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            margin: '2px 0'\n          },\n          children: [i + 1, \": \", d[labelKey]]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(D3BarChart, \"89Ty783ABEwsfMbSOeu9vscWF34=\");\n_c = D3BarChart;\nvar _c;\n$RefreshReg$(_c, \"D3BarChart\");","map":{"version":3,"names":["React","useRef","useEffect","d3","jsxDEV","_jsxDEV","D3BarChart","data","labelKey","valueKey","color","_s","svgRef","Array","isArray","length","margin","top","right","bottom","left","barBand","viewBoxWidth","viewBoxHeight","svg","select","current","attr","selectAll","remove","x","scaleBand","domain","map","d","range","padding","y","scaleLinear","max","nice","append","join","bandwidth","call","axisLeft","ticks","axisBottom","tickFormat","_","i","tickSize","style","width","overflowX","children","ref","height","display","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","fontSize","_c","$RefreshReg$"],"sources":["/Users/arseny0304/Desktop/full_service/frontend/src/components/D3BarChart.jsx"],"sourcesContent":["// frontend/src/components/D3BarChart.jsx\n\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nexport default function D3BarChart({\n  data,\n  labelKey,\n  valueKey,\n  color = '#ff69b4'\n}) {\n  const svgRef = useRef();\n\n  useEffect(() => {\n    if (!Array.isArray(data) || data.length === 0) return;\n\n    // паддинги и размеры\n    const margin = { top: 20, right: 20, bottom: 80, left: 60 };\n    const barBand = 40; // ширина “ячейки” на один бар\n    const viewBoxWidth = margin.left + margin.right + data.length * barBand;\n    const viewBoxHeight = 400;\n\n    // готовим SVG\n    const svg = d3\n      .select(svgRef.current)\n      .attr('viewBox', `0 0 ${viewBoxWidth} ${viewBoxHeight}`)\n      .attr('preserveAspectRatio', 'xMidYMid meet');\n    svg.selectAll('*').remove();\n\n    // шкалы\n    const x = d3\n      .scaleBand()\n      .domain(data.map(d => d[labelKey]))\n      .range([margin.left, viewBoxWidth - margin.right])\n      .padding(0.1);\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, d3.max(data, d => d[valueKey])])\n      .nice()\n      .range([viewBoxHeight - margin.bottom, margin.top]);\n\n    // рисуем бары\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n        .attr('x', d => x(d[labelKey]))\n        .attr('y', d => y(d[valueKey]))\n        .attr('width', x.bandwidth())\n        .attr('height', d => y(0) - y(d[valueKey]))\n        .attr('fill', color);\n\n    // ось Y\n    svg\n      .append('g')\n      .attr('transform', `translate(${margin.left},0)`)\n      .call(d3.axisLeft(y).ticks(5));\n\n    // ось X — просто номера\n    svg\n      .append('g')\n      .attr('transform', `translate(0,${viewBoxHeight - margin.bottom})`)\n      .call(\n        d3.axisBottom(x)\n          .tickFormat((_, i) => i + 1)\n          .tickSize(0)\n      )\n      .selectAll('text')\n        .style('font-size', '12px');\n\n  }, [data, labelKey, valueKey, color]);\n\n  return (\n    <div style={{ width: '100%', overflowX: 'auto' }}>\n      <svg\n        ref={svgRef}\n        style={{ width: '100%', height: 'auto', display: 'block' }}\n      />\n      <div style={{ marginTop: 8, fontSize: 14 }}>\n        <strong>Легенда:</strong>\n        <ol style={{ margin: '4px 0 0 16px', padding: 0 }}>\n          {data.map((d, i) => (\n            <li key={i} style={{ margin: '2px 0' }}>\n              {i + 1}: {d[labelKey]}\n            </li>\n          ))}\n        </ol>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}